<!DOCTYPE html>
<html>
    <head>
        <%- include('partials/head.ejs') -%>
    </head>
    <body>
        <div class="container">
            <style type="text/css">

             table {
                 table-layout: fixed;
                 word-wrap: break-word;
             }

             table th, table td {
                 overflow: hidden;
             }

            </style>

            <div class="row">
                <table id="track-table" class="table table-striped table-sm table-responsive" style="table-layout: fixed; width: auto;">
                </table>
            </div>
        </div>
        <script>
         var trackTable = document.getElementById("track-table");
         var tracks = <%- JSON.stringify(tracks) %>;
         var fields = Object.keys(tracks[0]);
         function humanify(str) {
             // replace _ -> space and capitalize words
             var words = str.replaceAll('_', ' ').split(' ');
             words = words.map(word => word.charAt(0).toUpperCase() + word.substr(1));
             return words.join(' ');
         }
         window.onload = function() {
             var cellWidth = Math.max(5, 100 / fields.length) + "%"
             tracks.forEach(track => {
                 var row = trackTable.insertRow(0);
                 fields.forEach(f => {
                     var cell = row.insertCell(-1);
                     cell.innerHTML = track[f];
                     //cell.style.overflow = "hidden";
                 });      
             });
             // header row
             var header = trackTable.createTHead();
             var row = header.insertRow(0);
             fields.forEach(f => {
                 var cell = row.insertCell(-1);
                 cell.innerHTML = humanify(f);
                 cell.style.width = cellWidth
                 //cell.style.overflow = "hidden";
             });
         };
        </script>
        <%- include('partials/foot.ejs') -%>
    </body>
</html>
